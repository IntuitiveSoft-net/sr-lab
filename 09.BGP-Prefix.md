## Task 1. Configure Segment Routing

Activate segment-routing on xrd-1.

:keyboard: xrd-1
```bash
configure terminal
router isis core
 address-family ipv4 unicast
  segment-routing mpls
 interface Loopback0
  address-family ipv4 unicast
   prefix-sid absolute 16001
   commit
   end
exit
```

Adapt the configuration template and configure accordingly lab devices xrd-1...xrd-6, xrd-10 and xrd-11.

<details><summary><b>Segment-Routing configurations snippets</b></summary>

```bash
xrd 1
```

:keyboard: xrd-1 configuration:
```bash
configure terminal
router isis core
 address-family ipv4 unicast
  segment-routing mpls
 interface Loopback0
  address-family ipv4 unicast
   prefix-sid absolute 16001
commit
end
exit
```

```bash
xrd 2
```

:keyboard: xrd-2 configuration:
```bash
configure terminal
router isis core
 address-family ipv4 unicast
  segment-routing mpls
 interface Loopback0
  address-family ipv4 unicast
   prefix-sid absolute 16002
commit
end
exit
```

```bash
xrd 3
```

:keyboard: xrd-3 configuration:
```bash
configure terminal
router isis core
 address-family ipv4 unicast
  segment-routing mpls
 interface Loopback0
  address-family ipv4 unicast
   prefix-sid absolute 16003
commit
end
exit
```

```bash
xrd 4
```

:keyboard: xrd-4 configuration:
```bash
configure terminal
router isis core
 address-family ipv4 unicast
  segment-routing mpls
 interface Loopback0
  address-family ipv4 unicast
   prefix-sid absolute 16004
commit
end
exit
```

```bash
xrd 5
```

:keyboard: xrd-5 configuration:
```bash
configure terminal
router isis core
 address-family ipv4 unicast
  segment-routing mpls
 interface Loopback0
  address-family ipv4 unicast
   prefix-sid absolute 16005
commit
end
exit
```

```bash
xrd 6
```

:keyboard: xrd-6 configuration:
```bash
configure terminal
router isis core
 address-family ipv4 unicast
  segment-routing mpls
 interface Loopback0
  address-family ipv4 unicast
   prefix-sid absolute 16006
commit
end
exit
```

```bash
xrd 10
```

:keyboard: xrd-10 configuration:
```bash
configure terminal
router isis core
 address-family ipv4 unicast
  segment-routing mpls
 interface Loopback0
  address-family ipv4 unicast
   prefix-sid absolute 16010
commit
end
exit
```

```bash
xrd 11
```

:keyboard: xrd-11 configuration:
```bash
configure terminal
router isis core
 address-family ipv4 unicast
  segment-routing mpls
 interface Loopback0
  address-family ipv4 unicast
   prefix-sid absolute 16011
commit
end
exit
```
</details>

## Task 2. 

### Node-6
!
route-policy SID($SID)
 set label-index $SID
end-policy
!
router bgp 2
 bgp router-id 6.6.6.6
 address-family ipv4 unicast
  network 6.6.6.6/32 route-policy SID(6)
  allocate-label all
 !
 address-family vpnv4 unicast
 !
 neighbor 11.11.11.11
  remote-as 2
  update-source Loopback0
  address-family ipv4 labeled-unicast
  !
  address-family vpnv4 unicast
  !
 !
 vrf ONE
  rd auto
  address-family ipv4 unicast
   network 99.6.99.0/24
   network 99.6.200.0/24
  !
 !
!
segment-routing
 global-block 16000 23999
!

### Node-4

!
route-policy PASS
pass
exit
!
router bgp 2
 bgp router-id 4.4.4.4
 address-family ipv4 unicast
  allocate-label all
 !
 neighbor 11.11.11.11
  remote-as 2
  update-source Loopback0
  address-family ipv4 labeled-unicast
   next-hop-self
  !
 !
 neighbor 99.3.4.3
  remote-as 1
  address-family ipv4 labeled-unicast
   route-policy PASS in
   route-policy PASS out
  !
 !
! 
segment-routing
global-block 16000 23999
!
router static
address-family ipv4 unicast
99.3.4.3/32 GigabitEthernet0/0/0/0
!

## Node-3

!
route-policy PASS
pass
exit
!
router bgp 1
bgp router-id 3.3.3.3
address-family ipv4 unicast
allocate-label all
!
neighbor 10.10.10.10
remote-as 1
update-source Loopback0
address-family ipv4 labeled-unicast
next-hop-self
!
neighbor 99.3.4.4
remote-as 2
address-family ipv4 labeled-unicast
route-policy PASS in
route-policy PASS out
!
segment-routing
global-block 16000 23999
!
router static
address-family ipv4 unicast
99.3.4.4/32 GigabitEthernet0/0/0/2
!

# Node-11

router bgp 2
 bgp router-id 11.11.11.11
 bgp cluster-id 11.11.11.11
 address-family ipv4 unicast
  allocate-label all
 !
 address-family vpnv4 unicast
 !
 neighbor 4.4.4.4
  remote-as 2
  update-source Loopback0
  address-family ipv4 labeled-unicast
   route-reflector-client
  !
  address-family vpnv4 unicast
   route-reflector-client
  !
 !
 neighbor 6.6.6.6
  remote-as 2
  update-source Loopback0
  address-family ipv4 labeled-unicast
   route-reflector-client
  !
  address-family vpnv4 unicast
   route-reflector-client
  !
 !
!

# Node-10

router bgp 1
 bgp router-id 10.10.10.10
 bgp cluster-id 10.10.10.10
 address-family ipv4 unicast
  allocate-label all
 !
 address-family vpnv4 unicast
 !
 neighbor 1.1.1.1
  remote-as 1
  update-source Loopback0
  address-family ipv4 labeled-unicast
   route-reflector-client
  !
  address-family vpnv4 unicast
  !
 !
 neighbor 3.3.3.3
  remote-as 1
  update-source Loopback0
  address-family ipv4 labeled-unicast
   route-reflector-client
  !
  address-family vpnv4 unicast
  !
 !
!

## Node-1

!
route-policy SID($SID)
set label-index $SID
end-policy
!
segment-routing
global-block 16000 23999
!
router bgp 1
bgp router-id 1.1.1.1
address-family ipv4 unicast
network 1.1.1.1/32 route-policy SID(1)
allocate-label all
!
address-family vpnv4 unicast
!
neighbor 10.10.10.10
remote-as 1
update-source Loopback0
address-family ipv4 labeled-unicast
!
address-family vpnv4 unicast
!
vrf ONE
rd auto
address-family ipv4 unicast
network 99.1.100.0/24
!
