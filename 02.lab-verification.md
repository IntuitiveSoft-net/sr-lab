# Lab Verification



```bash
show ospf interface brief
```
```
Interface          PID   Area            IP Address/Mask    Cost  State Nbrs F/C
Lo0                1     0               1.1.1.1/32         1     LOOP  0/0
Gi0/0/0/0          1     0               100.1.3.1/24       1     BDR   1/1
Gi0/0/0/1          1     0               100.1.5.1/24       1     BDR   1/1
Gi0/0/0/2          1     0               99.1.10.1/24       1     DR    0/0
```


show ospf neighbor
```bash
show ospf neighbor
```
```
* Indicates MADJ interface
# Indicates Neighbor awaiting BFD session up

Neighbors for OSPF 1

Neighbor ID     Pri   State           Dead Time   Address         Interface
3.3.3.3         1     FULL/DR         00:00:36    100.1.3.3       GigabitEthernet0/0/0/0
    Neighbor is up for 01:15:26
5.5.5.5         1     FULL/DR         00:00:35    100.1.5.5       GigabitEthernet0/0/0/1
    Neighbor is up for 01:15:48

Total neighbor count: 2
```

```bash
show ip route 
```
```
Wed Oct 26 09:39:16.628 UTC

Codes: C - connected, S - static, R - RIP, B - BGP, (>) - Diversion path
       D - EIGRP, EX - EIGRP external, O - OSPF, IA - OSPF inter area
       N1 - OSPF NSSA external type 1, N2 - OSPF NSSA external type 2
       E1 - OSPF external type 1, E2 - OSPF external type 2, E - EGP
       i - ISIS, L1 - IS-IS level-1, L2 - IS-IS level-2
       ia - IS-IS inter area, su - IS-IS summary null, * - candidate default
       U - per-user static route, o - ODR, L - local, G  - DAGR, l - LISP
       A - access/subscriber, a - Application route
       M - mobile route, r - RPL, t - Traffic Engineering, (!) - FRR Backup path

Gateway of last resort is not set

L    1.1.1.1/32 is directly connected, 01:18:11, Loopback0
O    2.2.2.2/32 [110/4] via 100.1.3.3, 01:17:26, GigabitEthernet0/0/0/0
                [110/4] via 100.1.5.5, 01:17:26, GigabitEthernet0/0/0/1
O    3.3.3.3/32 [110/2] via 100.1.3.3, 01:17:29, GigabitEthernet0/0/0/0
O    4.4.4.4/32 [110/3] via 100.1.3.3, 01:17:26, GigabitEthernet0/0/0/0
O    5.5.5.5/32 [110/2] via 100.1.5.5, 01:17:27, GigabitEthernet0/0/0/1
O    6.6.6.6/32 [110/3] via 100.1.5.5, 01:17:27, GigabitEthernet0/0/0/1
O    7.7.7.7/32 [110/3] via 100.1.3.3, 01:17:26, GigabitEthernet0/0/0/0
C    99.1.10.0/24 is directly connected, 01:18:11, GigabitEthernet0/0/0/2
L    99.1.10.1/32 is directly connected, 01:18:11, GigabitEthernet0/0/0/2
O    99.2.20.0/24 [110/4] via 100.1.3.3, 01:17:26, GigabitEthernet0/0/0/0
                  [110/4] via 100.1.5.5, 01:17:26, GigabitEthernet0/0/0/1
C    100.1.3.0/24 is directly connected, 01:18:11, GigabitEthernet0/0/0/0
L    100.1.3.1/32 is directly connected, 01:18:11, GigabitEthernet0/0/0/0
C    100.1.5.0/24 is directly connected, 01:18:11, GigabitEthernet0/0/0/1
L    100.1.5.1/32 is directly connected, 01:18:11, GigabitEthernet0/0/0/1
O    100.2.4.0/24 [110/3] via 100.1.3.3, 01:17:26, GigabitEthernet0/0/0/0
O    100.2.6.0/24 [110/3] via 100.1.5.5, 01:17:27, GigabitEthernet0/0/0/1
O    100.3.4.0/24 [110/2] via 100.1.3.3, 01:17:27, GigabitEthernet0/0/0/0
O    100.3.5.0/24 [110/2] via 100.1.3.3, 01:17:27, GigabitEthernet0/0/0/0
                  [110/2] via 100.1.5.5, 01:17:27, GigabitEthernet0/0/0/1
O    100.3.7.0/24 [110/2] via 100.1.3.3, 01:17:26, GigabitEthernet0/0/0/0
O    100.4.6.0/24 [110/3] via 100.1.3.3, 01:17:26, GigabitEthernet0/0/0/0
                  [110/3] via 100.1.5.5, 01:17:26, GigabitEthernet0/0/0/1
O    100.4.7.0/24 [110/3] via 100.1.3.3, 01:17:26, GigabitEthernet0/0/0/0
O    100.5.6.0/24 [110/2] via 100.1.5.5, 01:17:27, GigabitEthernet0/0/0/1
C    172.28.0.0/24 is directly connected, 01:18:11, MgmtEth0/RP0/CPU0/0
L    172.28.0.1/32 is directly connected, 01:18:11, MgmtEth0/RP0/CPU0/0
```

Activate segment-routing on xrd-1 
```bash
configure terminal
router ospf 1
 mpls traffic-eng router-id 1.1.1.1
 segment-routing mpls
 area 0
  mpls traffic-eng
  segment-routing mpls
  interface Loopback0 passive
  interface Loopback0 prefix-sid absolute 16001
commit
```

Adapt the configuration template and configure accordingly lab devices xrd-1 to xrd-6. 
[Other routers configurations](#sr-mpls-configurations)

---

# Configurations Annexes

## SR-MPLS Configurations

```bash
xrd 2
configure terminal
router ospf 1
 mpls traffic-eng router-id 2.2.2.2
 segment-routing mpls
 area 0
  mpls traffic-eng
  segment-routing mpls
  interface Loopback0 passive
  interface Loopback0 prefix-sid absolute 16002
commit
exit
xrd 3
configure terminal
router ospf 1
 mpls traffic-eng router-id 3.3.3.3
 segment-routing mpls
 area 0
  mpls traffic-eng
  segment-routing mpls
  interface Loopback0 passive
  interface Loopback0 prefix-sid absolute 16003
commit
exit 
xrd 4
configure terminal
router ospf 1
 mpls traffic-eng router-id 4.4.4.4
 segment-routing mpls
 area 0
  mpls traffic-eng
  segment-routing mpls
  interface Loopback0 passive
  interface Loopback0 prefix-sid absolute 16004
commit
exit
xrd 5
configure terminal
router ospf 1
 mpls traffic-eng router-id 5.5.5.5
 segment-routing mpls
 area 0
  mpls traffic-eng
  segment-routing mpls
  interface Loopback0 passive
  interface Loopback0 prefix-sid absolute 16005
commit
exit
xrd 6
configure terminal
router ospf 1
 mpls traffic-eng router-id 6.6.6.6
 segment-routing mpls
 area 0
  mpls traffic-eng
  segment-routing mpls
  interface Loopback0 passive
  interface Loopback0 prefix-sid absolute 16006
commit
exit
```

```bash
configure terminal
router ospf 1
 mpls traffic-eng router-id 3.3.3.3
 segment-routing mpls
 area 0
  mpls traffic-eng
  segment-routing mpls
  interface Loopback0 passive
  interface Loopback0 prefix-sid absolute 16003
```

```bash
configure terminal
router ospf 1
 mpls traffic-eng router-id 4.4.4.4
 segment-routing mpls
 area 0
  mpls traffic-eng
  segment-routing mpls
  interface Loopback0 passive
  interface Loopback0 prefix-sid absolute 16004
```

```bash
configure terminal
router ospf 1
 mpls traffic-eng router-id 5.5.5.5
 segment-routing mpls
 area 0
  mpls traffic-eng
  segment-routing mpls
  interface Loopback0 passive
  interface Loopback0 prefix-sid absolute 16005
```

```bash
configure terminal
router ospf 1
 mpls traffic-eng router-id 6.6.6.6
 segment-routing mpls
 area 0
  mpls traffic-eng
  segment-routing mpls
  interface Loopback0 passive
  interface Loopback0 prefix-sid absolute 16006
```